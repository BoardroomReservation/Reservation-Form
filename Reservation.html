<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>OCC Boardroom Reservation – Submit</title>
  <style>
    :root{
      --brand:#003366; --brand-2:#0055a5; --bg:#f5f7fb; --card:#ffffff;
      --text:#222; --muted:#667085; --border:#d0d5dd; --error:#c62828; --ok:#1b5e20;
    }
    *{box-sizing:border-box}
    body{ margin:0; font-family:Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--text); }
    .container{ max-width:700px; margin:40px auto; padding:0 16px; }
    .header{ display:flex; align-items:center; gap:12px; margin-bottom:16px; }
    .header img.logo{ height:48px; width:auto; }
    .header h1{ margin:0; font-size:24px; color:var(--brand); }
    .card{ background:var(--card); border:1px solid var(--border); border-radius:14px; padding:22px 20px; box-shadow:0 6px 18px rgba(0,0,0,.06); }
    .subtitle{ margin:0 0 16px; color:var(--muted); }
    .grid{ display:grid; grid-template-columns:1fr; gap:16px; }
    @media (min-width:720px){ .grid-2{ grid-template-columns:1fr 1fr; } }
    label{ display:block; font-weight:600; margin-bottom:6px; }
    .hint{ font-size:12px; color:var(--muted); margin-top:6px; }
    input[type="text"], input[type="date"], select, textarea{
      width:100%; padding:12px; border:1px solid var(--border); border-radius:10px; background:#fff;
      font-size:14px; outline:none; transition:border .15s ease, box-shadow .15s ease;
    }
    input:focus, select:focus, textarea:focus{ border-color:var(--brand-2); box-shadow:0 0 0 3px rgba(0,85,165,.12); }
    textarea{ min-height:130px; resize:vertical; }
    .inline-error{ color:var(--error); font-size:12px; margin-top:6px; display:none; }
    .counter{ font-size:12px; color:var(--muted); margin-top:6px; }
    .actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; }
    button{
      padding:12px 16px; background:var(--brand); color:#fff; font-weight:700; border:none; border-radius:10px;
      cursor:pointer; font-size:14px; transition: background .15s ease, transform .05s ease;
    }
    button:hover{ background:var(--brand-2); }
    .required{ color:#d32f2f; margin-left:2px }
    /* confirmation */
    .confirm{
      display:none; margin:14px 0 0; padding:10px 12px; border-radius:8px;
      background:#e7f5ec; color:#1b5e20; border:1px solid #b7e2c4; font-weight:600;
    }
    .note{ color:var(--muted); font-size:12px; margin-top:8px; }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header with Omega Healthcare logo (replace src with a local file if you prefer) -->
    <div class="header">
      <img class="logo" alt="Omega Healthcare" src="https://www.omegahms.com/wp-content/uploads/2025/01/cropped-cropped-OMH_Logo_Color_R.png" />
      <h1>OCC Boardroom Reservation – Submit</h1>
    </div>

    <div class="card">
      <p class="subtitle">Fill this out to book the 37F or 36F Boardroom. After you submit, the reservation is saved to the main list.</p>

      <form id="reservationForm" novalidate>
        <!-- Full Name -->
        <div class="grid grid-2">
          <div>
            <label>First Name<span class="required">*</span></label>
            <input type="text" id="firstName" placeholder="First Name" required />
            <div class="inline-error" id="firstNameErr">First Name is required.</div>
          </div>
          <div>
            <label>Last Name<span class="required">*</span></label>
            <input type="text" id="lastName" placeholder="Last Name" required />
            <div class="inline-error" id="lastNameErr">Last Name is required.</div>
          </div>
        </div>

        <!-- Date & Room -->
        <div class="grid grid-2" style="margin-top:12px;">
          <div>
            <label>Date<span class="required">*</span></label>
            <input type="date" id="date" required />
            <div class="inline-error" id="dateErr">Please select a date.</div>
          </div>
          <div>
            <label>Room<span class="required">*</span></label>
            <select id="room" required>
              <option value="">Select a room</option>
              <option value="37F Boardroom">37F Boardroom</option>
              <option value="36F Boardroom">36F Boardroom</option>
            </select>
            <div class="inline-error" id="roomErr">Please choose a room.</div>
          </div>
        </div>

        <!-- Time -->
        <div class="grid grid-2" style="margin-top:12px;">
          <div>
            <label>Start Time<span class="required">*</span></label>
            <select id="startTime" required></select>
            <div class="inline-error" id="startErr">Select Start Time.</div>
          </div>
          <div>
            <label>End Time<span class="required">*</span></label>
            <select id="endTime" required></select>
            <div class="inline-error" id="endErr">End Time must be after Start Time.</div>
          </div>
        </div>
        <div class="hint">Hours only (12 AM to 11 PM). Minutes are not included.</div>

        <!-- Purpose -->
        <div style="margin-top:12px;">
          <label>Purpose (200 words max)<span class="required">*</span></label>
          <textarea id="purpose" placeholder="Describe the purpose..." required></textarea>
          <div class="counter"><span id="wordCount">0</span>/200 words</div>
          <div class="inline-error" id="purposeErr">Purpose is required and must be 200 words or fewer.</div>
        </div>

        <div class="actions">
          <button type="submit">Submit</button>
        </div>

        <!-- Confirmation only (no “view” link) -->
        <div id="confirmMsg" class="confirm">✓ Reservation submitted. Thank you!</div>

        <p class="note">Note: With the current setup, entries are saved to this browser (localStorage). Your main page reads the same storage and will show the new entry.</p>
      </form>
    </div>
  </div>

  <script>
    // ===================== CONFIG =====================
    // Set to true if you want to auto-redirect to your OLD main page after submit.
    // Keep false to only show "Confirmed" and stay on this page.
    const CONFIG_REDIRECT_AFTER_SUBMIT = false;
    const MAIN_PAGE_URL = "index.html"; // old main page that shows the list
    // ==================================================

    document.addEventListener("DOMContentLoaded", function () {
      // ---------- Time dropdowns (12 AM – 11 PM) ----------
      const hours = Array.from({ length: 24 }, (_, i) => {
        const suffix = i < 12 ? "AM" : "PM";
        const hour = i % 12 === 0 ? 12 : i % 12;
        return `${hour} ${suffix}`;
      });
      const startTimeEl = document.getElementById("startTime");
      const endTimeEl = document.getElementById("endTime");
      function fillTime(select) {
        select.innerHTML = '<option value="">Select time</option>';
        hours.forEach(h => {
          const opt = document.createElement("option");
          opt.value = h; opt.textContent = h;
          select.appendChild(opt);
        });
      }
      fillTime(startTimeEl); fillTime(endTimeEl);

      // ---------- Helpers ----------
      const to24h = label => {
        if (!label) return null;
        const [hStr, ap] = label.split(" ");
        let h = parseInt(hStr, 10);
        if (ap === "AM") { if (h === 12) h = 0; }
        else { if (h !== 12) h += 12; }
        return h;
      };
      const countWords = t => (t.trim().match(/\b[\w’'-]+\b/g) || []).length;

      // ---------- Purpose counter ----------
      const purposeEl = document.getElementById("purpose");
      const wordCountEl = document.getElementById("wordCount");
      purposeEl.addEventListener("input", () => {
        const words = purposeEl.value.match(/\b[\w’'-]+\b/g) || [];
        if (words.length > 200) {
          purposeEl.value = words.slice(0,200).join(" ");
        }
        wordCountEl.textContent = countWords(purposeEl.value);
      });

      // ---------- LocalStorage ----------
      const LS_KEY = "occ_reservations";
      const loadReservations = () => {
        try { return JSON.parse(localStorage.getItem(LS_KEY)) || []; }
        catch { return []; }
      };
      const saveReservations = list => {
        localStorage.setItem(LS_KEY, JSON.stringify(list));
      };

      // ---------- Form handling ----------
      const form = document.getElementById("reservationForm");
      const firstName = document.getElementById("firstName");
      const lastName = document.getElementById("lastName");
      const dateEl = document.getElementById("date");
      const roomEl = document.getElementById("room");
      const confirmMsg = document.getElementById("confirmMsg");

      const firstNameErr = document.getElementById("firstNameErr");
      const lastNameErr = document.getElementById("lastNameErr");
      const dateErr = document.getElementById("dateErr");
      const roomErr = document.getElementById("roomErr");
      const startErr = document.getElementById("startErr");
      const endErr = document.getElementById("endErr");
      const purposeErr = document.getElementById("purposeErr");

      const show = el => el.style.display = "block";
      const hide = el => el.style.display = "none";

      form.addEventListener("submit", e => {
        e.preventDefault();
        [firstNameErr,lastNameErr,dateErr,roomErr,startErr,endErr,purposeErr].forEach(hide);
        confirmMsg.style.display = "none";

        let valid = true;
        if (!firstName.value.trim()) { show(firstNameErr); valid = false; }
        if (!lastName.value.trim())  { show(lastNameErr);  valid = false; }
        if (!dateEl.value)           { show(dateErr);      valid = false; }
        if (!roomEl.value)           { show(roomErr);      valid = false; }
        if (!startTimeEl.value)      { show(startErr);     valid = false; }
        if (!endTimeEl.value)        { show(endErr);       valid = false; }

        if (startTimeEl.value && endTimeEl.value) {
          const s = to24h(startTimeEl.value);
          const e2 = to24h(endTimeEl.value);
          if (!(s < e2)) { show(endErr); valid = false; }
        }

        const words = countWords(purposeEl.value);
        if (!purposeEl.value.trim() || words > 200) {
          show(purposeErr); valid = false;
        }

        if (!valid) return;

        // Save entry locally; main page reads this same data
        const entry = {
          id: Date.now().toString(),
          firstName: firstName.value.trim(),
          lastName: lastName.value.trim(),
          date: dateEl.value,
          room: roomEl.value,
          startTime: startTimeEl.value,
          endTime: endTimeEl.value,
          purpose: purposeEl.value.trim()
        };
        const current = loadReservations();
        current.push(entry); saveReservations(current);

        if (CONFIG_REDIRECT_AFTER_SUBMIT) {
          // Redirect user to the old main page (list view)
          // Add a little flag so the main page can show a success toast if you implemented one
          window.location.href = `${MAIN_PAGE_URL}?added=1`;
          return;
        }

        // Otherwise, just show "Confirmed" and reset
        show(confirmMsg);
        form.reset();
        fillTime(startTimeEl); fillTime(endTimeEl);
        wordCountEl.textContent = "0";
      });
    });
  </script>
</body>
</html>
``